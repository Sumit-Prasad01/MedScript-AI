<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üîç AI Medical Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom scrollbar for better aesthetics */
      ::-webkit-scrollbar {
        width: 6px;
      }
      ::-webkit-scrollbar-track {
        background: #1f2937;
      }
      ::-webkit-scrollbar-thumb {
        background: #4b5563;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #6b7280;
      }
    </style>
  </head>
  <body
    class="bg-gray-900 text-gray-100 min-h-screen flex flex-col items-center p-4 md:p-8"
  >
    <div
      class="w-full max-w-3xl flex flex-col h-[90vh] bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden"
    >
      <header
        class="p-6 border-b border-gray-700 bg-gray-800/50 backdrop-blur-md flex justify-between items-center"
      >
        <div>
          <h1
            class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-emerald-400 bg-clip-text text-transparent"
          >
            üîç Medical AI
          </h1>
          <p class="text-xs text-gray-400 mt-1 flex items-center">
            <span
              class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse mr-2"
            ></span>
            System Online
          </p>
        </div>
        <form method="get" action="{{ url_for('clear') }}">
          <button
            type="submit"
            class="text-sm bg-gray-700 hover:bg-red-900/40 text-gray-300 hover:text-red-400 px-4 py-2 rounded-lg transition-all duration-200 border border-gray-600"
          >
            Clear History
          </button>
        </form>
      </header>

      <div id="chat-box" class="flex-1 overflow-y-auto p-6 space-y-6">
        {% if error %}
        <div
          class="bg-red-900/20 border border-red-500/50 text-red-400 p-4 rounded-xl text-sm"
        >
          <strong>Error:</strong> {{ error }}
        </div>
        {% endif %} {% for msg in messages %}
        <div
          class="flex {{ 'justify-end' if msg.role == 'user' else 'justify-start' }}"
        >
          <div
            class="max-w-[85%] px-5 py-3 rounded-2xl shadow-sm 
                        {{ 'bg-blue-600 text-white rounded-tr-none' if msg.role == 'user' 
                           else 'bg-gray-700 text-gray-100 border border-gray-600 rounded-tl-none' }}"
          >
            <p
              class="text-xs font-bold uppercase tracking-widest opacity-50 mb-1"
            >
              {{ msg.role }}
            </p>
            <div class="text-sm leading-relaxed">
              {{ msg.content | safe | nl2br }}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <footer class="p-6 border-t border-gray-700 bg-gray-800">
        <form
          method="post"
          action="{{ url_for('index') }}"
          class="relative group"
        >
          <textarea
            name="prompt"
            placeholder="Describe symptoms or ask a medical question..."
            required
            class="w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-4 pr-16 text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none placeholder-gray-500"
          ></textarea>
          <button
            type="submit"
            class="absolute right-3 bottom-4 bg-blue-500 hover:bg-blue-400 text-white p-2 rounded-lg transition-colors shadow-lg shadow-blue-500/20"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"
              />
            </svg>
          </button>
        </form>
        <p
          class="text-[10px] text-center text-gray-500 mt-4 uppercase tracking-tighter"
        >
          Disclaimer: For informational purposes only. Consult a professional
          for medical advice.
        </p>
      </footer>
    </div>
  </body>
</html>
